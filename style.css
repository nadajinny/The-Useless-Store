:root {
  --bg: #0f0f12;
  --panel: #151820;
  --text: #e9eef4;
  --muted: #9aa7b4;
  --accent: #5fe38d;
  --accent-2: #59a7ff;
  --danger: #ff3b3b;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  background: radial-gradient(1200px 600px at 20% -10%, #1a1f2b 0%, var(--bg) 50%);
  color: var(--text);
  font: 14px/1.5 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, Apple SD Gothic Neo, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

#app { max-width: 980px; margin: 16px auto; padding: 0 12px; }

#hud {
  display: flex; align-items: center; justify-content: space-between;
  padding: 10px 12px; background: var(--panel); border-radius: 10px; border: 1px solid #232838;
  box-shadow: 0 4px 20px rgba(0,0,0,0.35);
}
.hud-left { display: flex; gap: 18px; align-items: center; }
.hud-item { color: var(--muted); }
.hud-item strong { margin-left: 6px; color: var(--text); }

.gap-bar { width: 280px; height: 10px; background: #0d1117; border-radius: 999px; overflow: hidden; border: 1px solid #222a39; }
.gap-fill { height: 100%; width: 50%; background: linear-gradient(90deg, var(--accent-2), var(--accent)); }
.gap-label { margin-top: 6px; color: var(--muted); text-align: right; }
.gap-label strong { color: var(--text); }

#game {
  position: relative; margin-top: 14px; border-radius: 14px; overflow: hidden; background: #0b0d12; border: 1px solid #222838;
}

canvas { display: block; width: 100%; height: auto; background: linear-gradient(180deg, #12161f 0%, #0b0d12 100%); }

#dangerOverlay {
  position: absolute; inset: 0; pointer-events: none;
  background: radial-gradient(50% 40% at 50% 100%, rgba(255,59,59,0) 0%, rgba(255,59,59,0.15) 60%, rgba(255,59,59,0.22) 80%, rgba(255,59,59,0.28) 100%);
  opacity: 0; transition: opacity 160ms ease;
}

#speech { position: absolute; left: 0; right: 0; bottom: 10px; display: flex; justify-content: center; pointer-events: none; }
#speech.hidden { display: none; }
.bubble {
  position: relative; background: #1f2432; color: #ffdede; border: 1px solid #3a2a2a; padding: 8px 12px; border-radius: 10px; box-shadow: 0 8px 30px rgba(0,0,0,0.35);
}
.bubble::after { content: ""; position: absolute; bottom: -8px; left: 50%; transform: translateX(-50%); width: 0; height: 0; border-left: 8px solid transparent; border-right: 8px solid transparent; border-top: 8px solid #1f2432; }

.overlay {
  position: absolute; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 14px;
  background: linear-gradient(180deg, rgba(3,4,7,0.8) 0%, rgba(3,4,7,0.9) 100%);
  text-align: center;
}
.overlay.hidden { display: none; }
.overlay.visible { display: flex; }
.overlay h1, .overlay h2 { margin: 0; }
.overlay .instructions { list-style: none; padding: 0; margin: 0; color: var(--muted); }
.overlay .instructions li { margin: 2px 0; }
.overlay .small { color: var(--muted); margin-top: 4px; }

button {
  background: var(--panel); color: var(--text); border: 1px solid #2a3348; border-radius: 10px; padding: 8px 14px; cursor: pointer; transition: 120ms ease; font-weight: 600;
}
button:hover { transform: translateY(-1px); box-shadow: 0 4px 14px rgba(0,0,0,0.25); }
button.accent { background: linear-gradient(90deg, var(--accent-2), var(--accent)); border: none; color: #0a0f14; }
button.ghost { background: transparent; border-color: #2a3348; color: var(--muted); }

/* Cart color accents by tier */
.tier-wood { outline: 2px solid #6b5b45; }
.tier-iron { outline: 2px solid #8a98a6; }
.tier-silver { outline: 2px solid #cfd9e6; }
.tier-gold { outline: 2px solid #ffd36b; }

@media (max-width: 840px) {
  .gap-bar { width: 180px; }
}
